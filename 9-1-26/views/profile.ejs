<%- include('partials/head') %>

<nav class="bg-white shadow px-8 py-4 flex justify-between items-center">
  <h1 class="text-xl font-bold">MyProject</h1>
  <div class="space-x-3 flex items-center">
    

<a href="/profile/upload" class="block hover:opacity-80 transition">
  <img
    class="w-10 h-10 rounded-full rounded-full"
    src="/images/upload/<%= user.avatar %>"
    alt="Profile Image"
  >
</a>

    <span class="font-medium text-gray-700"><%= user.username %></span>
    <a href="/logout" class="hover:text-blue-600">Logout</a>
  </div>
</nav>

<!-- Create Post Section -->
<section class="max-w-3xl mx-auto mt-10 bg-white p-6 rounded-xl shadow">
  <h2 class="text-xl font-semibold mb-4">Create a Post</h2>

  <form class="space-y-4" action="./post" method="POST">
    
    <textarea
    rows="4"
    placeholder="Write something..."
    name="content"
    class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"
    ></textarea>
    <input
      type="text"
      placeholder="Post caption"
      name="caption"
      class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"
    />

    <button
      type="submit"
      class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700"
    >
      Publish
    </button>
  </form>
</section>

<!-- Posts Section -->
<section class="max-w-3xl mx-auto mt-10 space-y-6">

  <!-- Post Card -->
 
<% user.post.reverse().forEach(function(post){%>
 <div class="bg-white p-6 rounded-xl shadow">
    <div class="flex justify-between    mb-2">
      
        <h4 class="text-blue-600 ">@<%= user.username %></h4><br>
        <span class="text-sm text-gray-400"><%= new Date(post.date).toLocaleTimeString('en-US', {
  hour: 'numeric',
  minute: '2-digit'
}) %></span>

    </div>
    <p class="text-gray-600 tracking-tight">
      <%=post.content%>
    </p>
    <span class="group mt-2 text-gray-600 text-[10px] w-[50%]">
           <%= post.caption %>
    </span>
    <span class="block mt-4 text-sm text-gray-500">Likes: <%= post.likes.length %></span>
    <div class="flex gap-4 mt-4 text-sm">
      <a class="text-blue-600 hover:underline cursor-pointer" href="/like/<%= post._id%>">
        <%= post.likes.indexOf(user._id) ? "Like" : "Unlike" %>
      </a>
      <a class="text-red-600 hover:underline" href="/edit/<%= post._id%>">Edit</a>
    </div>
  </div>
  <% })%>
  
</section>

<%- include('partials/footer') %>
